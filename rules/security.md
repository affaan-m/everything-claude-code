# セキュリティガイドライン

## 必須セキュリティチェック

**すべての**コミット前に:
- [ ] ハードコードされたシークレットなし（APIキー、パスワード、トークン）
- [ ] すべてのユーザー入力がバリデート済み
- [ ] SQLインジェクション対策（パラメータ化クエリ）
- [ ] XSS対策（HTMLサニタイズ済み）
- [ ] CSRF保護有効
- [ ] 認証/認可の確認
- [ ] 全エンドポイントにレート制限
- [ ] エラーメッセージが機密データを漏らさない

## シークレット管理

```typescript
// 絶対ダメ: ハードコードされたシークレット
const apiKey = "sk-proj-xxxxx"

// 常にこう: 環境変数
const apiKey = process.env.OPENAI_API_KEY

if (!apiKey) {
  throw new Error('OPENAI_API_KEYが設定されていません')
}
```

## セキュリティ対応プロトコル

セキュリティ問題が見つかった場合:
1. **即座に停止**
2. **security-reviewer** エージェントを使用
3. 続行前にCRITICALな問題を修正
4. 露出したシークレットをローテーション
5. 類似問題がないかコードベース全体をレビュー
